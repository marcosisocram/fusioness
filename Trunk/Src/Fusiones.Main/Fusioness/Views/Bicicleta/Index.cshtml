@model Fusioness.Models.Bicicletas.BicicletaModel
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/LayoutBase.cshtml";    
}

@section head{
    <style type="text/css">
        h4{font-weight:bold;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;}
         .card .card-body {padding: 20px; }
        .btn-group{ position: absolute;right: 10px;bottom: 10px; }
        .card.people { width: 210px; } 
        .card.people .card-top { width: 210px; }
    </style>
}

<script type="text/javascript">
    function ExibirModalMudarImagem(id) {
        $('#idbicicleta').val(id);
        $("#modalEditarImagem").modal('show');
    }
</script>

<!-- LINHA 1 -->
<div class="row-fluid">
  <!-- BLOCK -->
  <div class="span12">
    <div class="card">
      <h2 class="card-heading simple">Minhas bicicletas</h2>
      <div class="card-body">

          @foreach (var bicicleta in Model.ListaBicicletasPorUsuario)
          {
              
              <div class="card people">
                   <div class="card-top blue">
                      <a href="javascript:void(0);">
                         <img src="@String.Format("{0}{1}", Fusioness.Controllers.BaseController.ObterUrlBaseAvatar(), bicicleta.UrlImagem)" alt="[usuario não possui foto]"/>
                      </a>
                   </div>
                   <div class="card-info">
                      <a class="title" href="javascript:void(0);"></a>
                      <div class="desc">
                          <label><b>Modelo:</b> @bicicleta.Modelo</label>                          
                          <label><b>Marca: </b> @bicicleta.Marca</label>                          
                      </div>
                   </div>
                  <div class="btn-group">
                        @Html.ActionLink("Editar", "EditarBicicleta", "Bicicleta", new { IdBicicleta = bicicleta.IdBicicleta }, new { @class = "btn btn-primary" })
                        @Html.ActionLink("Excluir", "ExcluirBicicleta", "Bicicleta", new { IdBicicleta = bicicleta.IdBicicleta }, new { @class = "btn btn-danger" })
                        <button  value="" class="btn btn-primary" onclick="ExibirModalMudarImagem(@bicicleta.IdBicicleta);" >Mudar foto</button>
                   </div>
                </div> 
              
              
                                          
          }        
      </div>
    </div>
      
    </div>
  <!-- END BLOCK -->
</div><!-- END LINHA 2 -->

<!-- LINHA 2 -->
<div class="row-fluid"></div>
  
  <!-- BLOCK -->
<div id="modalEditarImagem" class="modal hide fade" tabindex="-1" role="dialog" aria-hidden="true">
    @using (Html.BeginForm("EnviarImagem", "Bicicleta", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">Selecione a imagem</h3>
    </div>
    <div class="modal-body">
        <p>
            <input type="file" id="image" name="image" />
            <input type="hidden" id="idbicicleta" name="idbicicleta" />
        </p>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
        <button class="btn btn-primary" type="submit">Save changes</button>
    </div>
    }
</div>